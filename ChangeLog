2018-01-20  Minsheng Liu  <lambda@liu.ms>

  Move code for the demeaned linear model to a separate class "LinearModel".

  We introduce a new class for solving linear models using "arma::solve".
  The main change to that function is to check linear dependency from the input.

  modified:   CMakeLists.txt
  new file:   src/LinearModel.cpp
  new file:   src/LinearModel.h

  The code is extracted from "FastFESolver.cpp".

  modified:   src/FastFESolver.cpp
  modified:   src/FastFESolver.h

  We also move some helper functions to "Common.h".

  modified:   src/Common.h

  There is no behavior change so no new test is required.


2018-01-09  Minsheng Liu  <lambda@liu.ms>

  A new algorithm to estimate fixed effects after MAP.

  We use the amount of changes the fixed effects projections applied to X and Y
  to recover fixed effects. A more detailed description will be provided as a
  mathematical proof.

  Collect changes of demean:

  modified:   src/FixedEffect.cpp
  modified:   src/FixedEffect.h

  Reconstruct fixed effects:

  modified:   src/FastFESolver.cpp
  modified:   src/FastFESolver.h

  "SlowFESolver" is no longer neeeded:

  deleted:    src/SlowFESolver.cpp
  deleted:    src/SlowFESolver.h

  Since estimating fixed effects requires little computing power, the
  "estimateFE" attribute will be ignored. The estimation of fixed effects
  will always happen.

  modified:   R/Wrapper.R
  modified:   src/Wrapper.cpp

  A more functional code stye is used. Since "make_pair" is used extensively,
  we now require C++ 14 for its return type deduction feature.

  modified:   CMakeLists.txt
  modified:   DESCRIPTION


2018-01-04  Minsheng Liu  <lambda@liu.ms>

  Refactor "solveFE".

  Rewrite the function as "solve.fixed.effects".
  "solveFE" is kept as a wrapper for backward compatibility.

  modified:   R/Wrapper.R

  There is no behavior change so new tests are not required.


2018-01-04  Minsheng Liu  <lambda@liu.ms>

  Refactor "FixedEffect::fromColumn".

  Simplify the logic as hashing for indicators is done in R now.
  Also, remove the unused "FixedEffect::indices" instance variable.

  modified:   src/FixedEffect.cpp
  modified:   src/FixedEffect.h


2018-01-04  Minsheng Liu  <lambda@liu.ms>

  Remove unnecessary files.

  Delete R Studio project file since R Studio is no longer used,

  deleted:    fastplm.Rproj

  Packaging is done by "devtools" rather than "Makefile".

  modified:   Makefile


2018-01-02  Minsheng Liu  <lambda@liu.ms>

  "predictFE" now produces a warning when an unknown indicator occurs.

  The logic of "predictFE" is rewritten and moved to "predict.fixed.effects".
  The new function employs a more canonical R style (more functional, less
  imperative). The warning message is generated from a function in "messages.R",
  which makes testing much easier.

  modified:   R/Wrapper.R
  new file:   R/messages.R

  Export only "solveFE", "solveGP", and "predictFE". All other internal functions
  are now hidden.

  modified:   NAMESPACE

  Add unit test for "predictFE" with unknown indicators.

  new file:   tests/testthat/test-predict-fixed-effects-with-unknown-indicators.R

  Remove the unnecessary call "library(fastplm)" as "testthat" loads "fastplm"
  automatically.

  modified:   tests/testthat/test-demean-fixed-effects.R
  modified:   tests/testthat/test-predict-fixed-effects.R

  Bump the version to 0.1.6.0 to reflect the interface change.

  modified:   DESCRIPTION


2018-01-02  Minsheng Liu  <lambda@liu.ms>

  Update "test-predict-fixed-effects.R": isomorphic group indicators give equal
  but not identical prediction.

  Note that even for isomorphic group indicators, the demeaning process will
  yield different results due to float point error if the order of group
  indicators after "factor" differ. The affected test,

    tests/testthat/test-predict-fixed-effects.R

  mistakenly assumed that by changing indicators from 1, 2, ..., N to
  %prefix%.1, %prefix%.2, ..., %prefix%.N, the order of group indicators after
  "factor" will remain the same. However, the canonical sorting for strings
  will yield

    1 > 10 > 11 > ... > 2 > 20 > 21

  rather than

    1 > 2 > ... > 10 > 11 > ... > 20 > 21.

  So the assumption is wrong. As a result, "expect_equal" rather than
  "expect_identical" should be used.

  modified:   tests/testthat/test-predict-fixed-effects.R


2018-01-01  Minsheng Liu  <lambda@liu.ms>

  Bump the version number to 0.1.5.3 to reflect recent bug fixes.

  Note that previously 0.1.5.2 was released but the git commits were not pushed
  to the repository so it stayed 0.1.5.1. This change is to avoid conflict when
  installing this package.

  E-mail address for Minsheng Liu is also updated.

  modified:   DESCRIPTION


2018-01-01  Minsheng Liu  <lambda@liu.ms>

  Handle group indicators of type "character" for "predictFE".

  The bug is the same as the one fixed in commit 628681518ecb8aacabbfc8c24a8a3db4035f7473
  (https://github.com/xuyiqing/fastplm/commit/628681518ecb8aacabbfc8c24a8a3db4035f7473).
  This time it occurs in "predictFE".

  modified:   R/Wrapper.R

  Add unit test for predicting fixed effects. We compare the predicted results
  using the same X used for "solveFE" with fitted values given by the latter.
  The following two situations are checked:

  * group indicators ranging from 1 consecutively to N
  * some random character-based indicators

  new file:   tests/testthat/test-predict-fixed-effects.R

  Functions from
    tests/testthat/test-demean-fixed-effects.R
  are abstracted into
    tests/testthat/make-small-data.R
  for reusing. Also, group values are renamed as group indicators for consistency.

  new file:   tests/testthat/make-small-data.R
  modified:   tests/testthat/test-demean-fixed-effects.R


2018-01-01  Minsheng Liu  <lambda@liu.ms>

  Handle group indicators of type "character".

  In "R/Wrapper.R", f the input group indicators are of type "character", 
  the factor-ed indicators will also be coerced into "character".
  This change assign each column of the factor-ed indicators into a new
  variable to avoid the "coercion pollution".

  modified:   R/Wrapper.R

  Add unit test for demeaning fixed effects. We compare

  * the coefficients given by "solveFE" and "felm"
  * two outputs by "solveFE" supplied with
    * group indicators ranging from 1 consecutively to N
    * some random character-based indicators

  new file:   tests/testthat/test-demean-fixed-effects.R


2018-01-01  Minsheng Liu  <lambda@liu.ms>

  Employ "testthat" for unit tests.

  modified:   .gitignore
  modified:   DESCRIPTION
  modified:   NAMESPACE
  new file:   R/catch-routine-registration.R
  new file:   src/test-runner.cpp
  new file:   tests/testthat.R
